<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mor Prom Memory Match</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #00A69C;
            --secondary: #00566B;
            --accent: #F39C12;
            --dark-bg: #1a1a1a;
            --card-back: #2c3e50;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background-color: var(--dark-bg);
            background-image: radial-gradient(circle at center, #2a2a2a 0%, #000 100%);
            color: white;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* HEADER */
        .header {
            position: absolute;
            top: 20px;
            text-align: center;
            z-index: 10;
        }
        .title {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(0, 166, 156, 0.5);
            margin: 0;
        }
        .subtitle { font-size: 1rem; color: #ccc; }
        
        .timer-box {
            background: rgba(0,0,0,0.5);
            padding: 5px 20px;
            border-radius: 20px;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 10px;
            display: inline-block;
        }

        /* GAME BOARD */
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 60px;
            perspective: 1000px;
        }

        .card {
            width: 80px;
            height: 80px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.matched {
            transform: rotateY(180deg) scale(0.9);
            opacity: 0.5;
            cursor: default;
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            font-size: 2.5rem;
            border: 2px solid var(--primary);
        }

        .card-front {
            background: var(--card-back);
            color: rgba(255,255,255,0.2);
            transform: rotateY(0deg);
        }
        
        /* ‡πÉ‡∏™‡πà‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏´‡∏°‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏≤‡∏á‡πÜ ‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î */
        .card-front::after {
            content: '\f0f0'; /* FontAwesome Icon: Doctor (Placeholder) */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
        }

        .card-back {
            background: white;
            color: var(--primary);
            transform: rotateY(180deg);
        }

        /* ICONS COLORS */
        .icon-heart { color: #e74c3c; }
        .icon-eye { color: #3498db; }
        .icon-app { color: #00A69C; }
        .icon-cert { color: #f1c40f; }
        .icon-loc { color: #e67e22; }
        .icon-id { color: #9b59b6; }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 100;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .modal h2 { font-size: 3rem; color: var(--accent); margin: 0; }
        .modal p { font-size: 1.5rem; color: white; }
        .btn-restart {
            margin-top: 20px;
            padding: 15px 40px;
            font-size: 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Prompt', sans-serif;
            box-shadow: 0 0 20px var(--primary);
            transition: 0.3s;
        }
        .btn-restart:hover { transform: scale(1.1); }

        /* Responsive */
        @media (max-width: 600px) {
            .game-board { gap: 10px; }
            .card { width: 60px; height: 60px; }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="title">MEMORY MATCH</div>
        <div class="subtitle">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏°‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏° & ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞</div>
        <div class="timer-box" id="timer">00:00</div>
    </div>

    <div class="game-board" id="gameBoard">
        </div>

    <div id="winModal" class="modal">
        <h2>üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!</h2>
        <p>‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏´‡∏°‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°</p>
        <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ: <span id="finalTime" style="color:var(--primary)"></span></p>
        <button class="btn-restart" onclick="startGame()">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
    </div>

    <script>
        // --- SOUND ENGINE ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            if (type === 'flip') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                osc.start(); osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'match') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(400, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(800, audioCtx.currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'win') {
                // Fanfare
                const now = audioCtx.currentTime;
                [523, 659, 784, 1046].forEach((freq, i) => {
                    const o = audioCtx.createOscillator();
                    const g = audioCtx.createGain();
                    o.type = 'square';
                    o.frequency.value = freq;
                    g.gain.value = 0.1;
                    g.gain.exponentialRampToValueAtTime(0.01, now + 0.5 + (i*0.1));
                    o.connect(g); g.connect(audioCtx.destination);
                    o.start(now + (i*0.1)); o.stop(now + 1.0);
                });
            }
            
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
        }

        // --- GAME LOGIC ---
        // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ (FontAwesome Classes)
        const cardIcons = [
            { icon: 'fa-heart-pulse', color: 'icon-heart', name: '‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏´‡∏±‡∏ß‡πÉ‡∏à' },
            { icon: 'fa-eye', color: 'icon-eye', name: '‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏î‡∏ß‡∏á‡∏ï‡∏≤' },
            { icon: 'fa-mobile-screen', color: 'icon-app', name: 'App ‡∏´‡∏°‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°' },
            { icon: 'fa-file-medical', color: 'icon-cert', name: '‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå' },
            { icon: 'fa-location-dot', color: 'icon-loc', name: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£' },
            { icon: 'fa-address-card', color: 'icon-id', name: 'Digital Health ID' }
        ];

        let cards = [];
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let matchesFound = 0;
        let startTime;
        let timerInterval;

        function startGame() {
            const board = document.getElementById('gameBoard');
            const modal = document.getElementById('winModal');
            
            modal.style.display = 'none';
            board.innerHTML = '';
            matchesFound = 0;
            hasFlippedCard = false;
            lockBoard = false;
            firstCard = null;
            secondCard = null;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î (6 ‡∏Ñ‡∏π‡πà = 12 ‡πÉ‡∏ö)
            let deck = [...cardIcons, ...cardIcons];
            deck.sort(() => 0.5 - Math.random()); // ‡∏™‡∏±‡∏ö‡πÑ‡∏û‡πà

            deck.forEach(item => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.name = item.name;
                
                card.innerHTML = `
                    <div class="card-face card-front"></div>
                    <div class="card-face card-back">
                        <i class="fa-solid ${item.icon} ${item.color}"></i>
                    </div>
                `;
                
                card.addEventListener('click', flipCard);
                board.appendChild(card);
            });

            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
            startTime = Date.now();
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const now = Date.now();
            const diff = Math.floor((now - startTime) / 1000);
            const m = Math.floor(diff / 60).toString().padStart(2, '0');
            const s = (diff % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${m}:${s}`;
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;

            this.classList.add('flipped');
            playSound('flip');

            if (!hasFlippedCard) {
                // ‡πÉ‡∏ö‡πÅ‡∏£‡∏Å
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            // ‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á
            secondCard = this;
            checkForMatch();
        }

        function checkForMatch() {
            let isMatch = firstCard.dataset.name === secondCard.dataset.name;
            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            playSound('match');
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');
            
            resetBoard();
            matchesFound++;

            // ‡∏ä‡∏ô‡∏∞‡πÄ‡∏Å‡∏° (‡∏Ñ‡∏£‡∏ö 6 ‡∏Ñ‡∏π‡πà)
            if (matchesFound === cardIcons.length) {
                clearInterval(timerInterval);
                setTimeout(() => {
                    playSound('win');
                    document.getElementById('finalTime').innerText = document.getElementById('timer').innerText;
                    document.getElementById('winModal').style.display = 'flex';
                    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                }, 500);
            }
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetBoard();
            }, 1000); // ‡∏£‡∏≠ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏•‡∏±‡∏ö
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î
        window.onload = startGame;

    </script>
</body>
</html>
